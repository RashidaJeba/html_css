var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},VideoEvents;(function(){function ot(t){(p(),t&&!(t.length<2)&&t[1]&&l&&n)&&(y=t[1].videoType,s=t[1].videoExtraInfo,i=t[1].bindEventSupportedList?t[1].bindEventSupportedList:i,ht())}function st(t){var i;t&&!(t.length<2)&&t[1]&&l&&n&&(g=(i=t[1].ci)===null||i===void 0?void 0:i.noci)}function ht(){(i===null||i===void 0?void 0:i.indexOf("video"))!=-1&&(sj_evt.bind(n.EmbedPlayer_ComponentUpdate,nt),sj_evt.bind(n.VideoCanvas_VideoPlaying,c),sj_evt.bind(n.VideoCanvas_VideoStopped,u),sj_evt.bind(n.VideoCanvas_VideoEnded,u),sj_evt.bind(n.VideoCanvas_VideoPlayerReady,tt));t&&(i===null||i===void 0?void 0:i.indexOf("preview"))!=-1&&(sj_evt.bind(t.PlayerDownloadEndEvt,it),sj_evt.bind(t.PlayerStartEvt,c),sj_evt.bind(t.PlayerEndEvt,u),sj_evt.bind(t.PlayerErrEvt,u),sj_evt.bind(t.PlayerPauseEvt,u),sj_evt.bind(t.StopPlayEvt,u));sj_be(_w,k,p)}function nt(){if(typeof(r===null||r===void 0?void 0:r.destroy)==b){if(h){var n=r.getTimeLeft();r.pause();n>0&&!o&&n<et&&w(!0)}r.destroy()}g&&!o&&e&&w(!1);r=null;o=!1;h=!1}function c(){if(!o)if(r)r.start();else{var n=at();lt();r=new l(ct,n)}}function u(){r===null||r===void 0?void 0:r.pause()}function p(){(i===null||i===void 0?void 0:i.indexOf("video"))!=-1&&(sj_evt.unbind(n.EmbedPlayer_ComponentUpdate,nt),sj_evt.unbind(n.VideoCanvas_VideoPlaying,c),sj_evt.unbind(n.VideoCanvas_VideoStopped,u),sj_evt.unbind(n.VideoCanvas_VideoEnded,u),sj_evt.unbind(n.VideoCanvas_VideoPlayerReady,tt));t&&(i===null||i===void 0?void 0:i.indexOf("preview"))!=-1&&(sj_evt.unbind(t.PlayerDownloadEndEvt,it),sj_evt.unbind(t.PlayerStartEvt,c),sj_evt.unbind(t.PlayerEndEvt,u),sj_evt.unbind(t.PlayerErrEvt,u),sj_evt.unbind(t.PlayerPauseEvt,u),sj_evt.unbind(t.StopPlayEvt,u));sj_ue(_w,k,p)}function tt(n){if(f=-1,n&&!(n.length<2)&&n[1]){var t=n[1];t.videoDuration>0&&(f=t.videoDuration*d);switch(y){case"video":h=f<=a;break;case"preview":h=f<=v}}}function it(n){if(f=-1,n&&!(n.length<5)&&n[4]){var t=n[4];t>0&&(f=t*d)}}function ct(){w(!0)}function lt(){var n={TS:null,T:null,AppNS:rt},t={recoFeedbackType:null,videoExtraInfo:__assign({},s)};s&&(n=__assign(__assign({},n),s));e={j:n,r:t}}function w(t){var i=e===null||e===void 0?void 0:e.j,r=e===null||e===void 0?void 0:e.r;i&&r&&(i.T=t?"IsCI":"IsNoCI",i.TS=(new Date).getTime(),r.recoFeedbackType=t?"IsCI":"IsNoCI",pInstr.icd(i),typeof(sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire)==b&&(sj_evt.fire(n.VideoEvent_SendRecoFeedback,r),sj_evt.fire(n.VideoCanvas_VideoCI,i)),o=t)}function at(){switch(y){case"video":return f>ut?ft:f>0?Math.min(f,a):a;case"preview":return f>0?Math.min(f,v):v;default:return Number.MAX_SAFE_INTEGER}}var b="function",t=typeof VRHConsts!="undefined"?VRHConsts:null,n=typeof SharedEventString!="undefined"?SharedEventString:null,l=typeof MMTimer!="undefined"&&typeof(MMTimer===null||MMTimer===void 0?void 0:MMTimer.Timer)!="undefined"?MMTimer.Timer:null,k="unload",rt="video",ut=3e4,ft=2e4,a=8e3,v=8e3,d=1e3,et=1e3,f,s,y,r,o=!1,h=!1,e,g=!1,i=["preview","video"];sj_evt.bind(n===null||n===void 0?void 0:n.VideoCanvas_InitIsCIModule,ot,!0);sj_evt.bind(n===null||n===void 0?void 0:n.VideoCanvas_UpdateVideoEventsConfig,st,!0)})(VideoEvents||(VideoEvents={}))